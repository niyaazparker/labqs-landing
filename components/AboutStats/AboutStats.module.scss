@use '../../styles/variables' as *;

/* ===== Layout ===== */
.wrap { position: relative; }

.grid {
  display: grid;
  grid-template-columns: minmax(420px, 1.05fr) minmax(420px, .95fr);
  gap: 0;                          /* the seam is shared */
  align-items: stretch;
}
/* ----- Left (white card) ----- */
.left {
  position: relative;
  z-index: 1;                      /* below the panel/markers so they can overlap */
  background: rgba(255,255,255,.98);
  color: #0f1724;
  border-radius: 0;
  box-shadow: 0 18px 60px rgba(0,0,0,.18);
  padding: max(1.75rem, min(3.6vw, 2.25rem)) max(8rem, min(3.4vw, 2.25rem));
  align-content: center;
  p {font-size: 1.25rem;line-height: 2rem;}
}

p.kicker {
  margin: 0 0 .5rem;
  text-transform: uppercase;
  letter-spacing: .22em;
  font-size: 1rem;
  color: $color-5;
}

.title {
  margin: 0 0 1rem;
  font-family: var(--ff-alt), Georgia, "Times New Roman", serif;
  letter-spacing: -.01em;
  line-height: 3.625rem;
  font-size: 3rem;
  color: $color-4;
}


/* Small CTA */
/* Pill CTA like Learn More, adapted for light card */
.storyLink {
  --cta-fill: #1F6F7F;        /* cyan fill */
  --text-default: #1F6F7F;    /* link blue on white card */
  --text-filled: #ffffff;     /* text when filled */

  position: relative;
  display: inline-flex; align-items: center; gap: .55rem;
  padding: .55rem .9rem;
  border-radius: 999px;
  color: var(--text-default);
  text-decoration: none;
  letter-spacing: .12em;
  text-transform: uppercase;
  font-weight: 700;
  font-size: 0.875rem;
  overflow: hidden;
  isolation: isolate;
  transition: color .25s ease, border-color .25s ease, transform .06s ease-in;

  /* fill grows from left */
  &::before {
    content: "";
    position: absolute; inset: 0;
    background: var(--cta-fill);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform .35s ease;
    z-index: 0;
  }

  .storyLabel { position: relative; z-index: 1; }

  /* arrow that inherits currentColor */
  .storyArrow {
    position: relative; z-index: 1;
    width: 30px; height: 30px;
    background-color: currentColor;
    -webkit-mask: url('/icons/next-arrow.svg') center / contain no-repeat;
            mask: url('/icons/next-arrow.svg') center / contain no-repeat;
    transform: translateX(0);
    transition: transform .35s ease;
  }

  /* hover/focus: fill in, dark text, arrow slides */
  &:hover::before,
  &:focus-visible::before { transform: scaleX(1); }

  &:hover,
  &:focus-visible {
    color: var(--text-filled);
    border-color: transparent;
  }

  &:hover .storyArrow,
  &:focus-visible .storyArrow { transform: translateX(4px); }

  &:active { transform: translateY(1px); }
  &:focus-visible { outline: 2px solid #4AD7D1; outline-offset: 3px; }
}

@media (prefers-reduced-motion: reduce) {
  .storyLink::before, .storyLink .storyArrow { transition: none; }
}



/* ----- Right (blue panel) ----- */
.right {
  position: relative;
  z-index: 2;                      /* above the white card to overlap seam */
  --lift: clamp(56px, 9vh, 96px);  /* how far the panel overlaps into the hero */
}

.panel {
  position: relative;
  background: #2e4f80;
  border-radius: 0;
  color: $color-text;
  overflow: visible;               /* allow connectors to stick out over the seam */

  /* The magic: lift up, but extend height so the bottom still meets the row */
  transform: translateY(calc(-1 * var(--lift)));
  height: 79.5%;

  /* paddings tuned to comp */
  padding:max(8rem, min(2.6vw, 2rem)) max(1.25rem, min(3vw, 2.25rem));
}

/* ===== Stats ===== */
.h {
  font-family: var(--ff-alt), Georgia, "Times New Roman", serif;
  margin: 0 0 .35rem;
  font-weight: 700;
  color: $color-12;
  letter-spacing: .02em;
  line-height: 4.0625rem;
  font-size: 3rem;
}
.hMain { margin-right: .35rem; }
.hAccent { text-transform: uppercase; letter-spacing: .18em; font-weight: 700; font-size: .8em; color: #9deee9; }

.blurb { margin: 0; opacity: .9; color: $white; line-height: 1.75rem; font-size: 1.125rem; }

/* one stat row */
$connector-w: 120px;               /* length of your bullets.svg */
$connector-h: 50px;

.stat {
  position: relative;
  padding: clamp(1rem, 3.2vh, 1.6rem) 0 clamp(1rem, 3.2vh, 1.6rem) 8rem;


  /* connector (dot + line) from the provided svg */
  &::before {
    content: '';
    position: absolute;
    left: -60px;                   /* push over the seam into the white card */
    top: 2.2rem;                  /* aligns with headline baseline */
    width: $connector-w;
    height: $connector-h;
    background: url('/icons/bullets.svg') left center / contain no-repeat;
    opacity: .95;
    pointer-events: none;
  }
}

/* ===== Mobile ===== */
@media (max-width: $bp-md) {
  .grid { grid-template-columns: 1fr; gap: 1.75rem;background: rgba(255, 255, 255, .98); }

  .left { 
    padding: 8.25rem 3.75rem;
    text-align: center;
    box-shadow: none;
    background: none;
    h2 {
      font-size: 2.1875rem;
      line-height: 2.8125rem;
    }
    p {
      font-size: 0.6875rem;
      line-height: 1.8rem;
    }
   }

  .right { --lift: 0px;padding: 0 2.5rem;box-shadow: none; }          /* no overlap on mobile */
  .stat {
  /* connector (dot + line) from the provided svg */
  &::before {
    content: '';
    left: -60px;                   /* push over the seam into the white card */
    top: 1.2rem;                  /* aligns with headline baseline */
    width: $connector-w;
    height: $connector-h;
    background: none;
    }
    
  }
  .panel {
    transform: none; height: auto;
    padding:5rem 1rem;
    margin-inline: auto; max-width: 420px;
  }

  .stat {
    padding: 0 .75rem; text-align: center;


    &::before {
      left: 50%;
      top: calc(50% - #{$connector-h}/2);
      transform: translateX(-50%);
      width: 140px; height: $connector-h;
      
    }

    &::after {
    content: '';
    width: 100%;
    height: 50px;
    display: flex;
    background-position: center;
    background: url('/icons/mobile-bullets.svg') left center / contain no-repeat;
    background-position: center;
    margin: 2.1875rem 0;
      
    }
    &:last-child::after {
     margin-bottom: 0;
    }
  }

  .h { font-size: 2.1875rem;line-height: 4.0625rem; }
  .blurb { font-size: 0.9375rem; line-height: 1.5rem; }
}
